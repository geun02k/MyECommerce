# MY E-COMMERCE PROJECT
Spring Boot 기반의 간단한 이커머스 API 서버

## 1. 프로젝트 개요
> 실무에서 경험한 내 서비스 구조와 테스트 방식의 한계를 개선하기 위해
기능 단위 로직 분리와 테스트 도입을 중심으로 설계를 고도화한 이커머스 백엔드 프로젝트.

본 프로젝트는 이커머스 도메인의 흐름(인증 -> 상품 -> 장바구니 -> 주문 -> 결제)을 직접 설계하고 구현한 개인 백엔드 프로젝트입니다.   
기능 구현도 중요하지만 실무에서 겪었던 서비스 로직 집중, 변경 영향 범위 파악의 어려움, 수동 테스트 의존 문제를 구조적으로 개선해보는 것을 주요 목표로 삼았습니다.    
<br>
현업에서는 하나의 Service 메서드에 판단, 정책 검증, 객체 생성, 저장 로직이 모두 포함된 형태로 로직이 길어지는 구조를 경험했습니다.
이로 인해 기능 추가,수정 시 영향 범위를 파악하기 어렵고, 변경 후 검증에도 많은 시간이 소요되었습니다.
<br>
이 프로젝트는 이러한 경험을 바탕으로,
Service 로직을 기능 단위로 분리하고 유스케이스 흐름 조합 역할로 제한하며,
테스트 코드를 설계 단계부터 도입해 변경 사항을 빠르고 안전하게 검증할 수 있는 구조를 만드는 데 집중했습니다.
<br>

> Goal : 인증/인가, 주문, 결제 흐름을 포함한 이커머스 API 서버를 구축한다.


## 2. 기술 스택
- Backend: Spring Boot, Java 17
- Persistence: Spring Data JPA, MySQL   
  객체 중심 도메인 모델링과 영속성 컨텍스트 이해를 목표로 사용.
- Security: Spring Security, JWT    
  인증/인가 흐름을 직접 구성하며 기본 구조 이해.
- Cache/Infra: Redis    
  캐시 및 세션성 데이터 관리 경험을 위해 사용.
- Build: Gradle
- Test: JUnit5
- API Test: Postman


## 3. 프로젝트 설계 목표
### 3-1. 초기 설계 목표
핵심 설계 목표는 변경이 두렵지 않은 구조를 만드는 것입니다.
실무에서 경험한 서비스 로직의 과도한 집중, 변경 영향 범위 파악의 어려움, 웹 화면 중심의 수동 테스트에 대한 의존을 개선하는 것을 핵심 목표로 삼았습니다.
따라서 서비스 로직을 기능 단위로 분리하고 테스트를 통해 설계를 검증하는 것을 목표로 합니다.

- [x] 서비스 로직의 기능 단위 분리
  1. 설계 배경   
     실무에서는 하나의 Service 메서드에 로직을 길게 작성하는 습관이 있었고,
     이로 인해 기능 단위로 코드 구조로 드러나지 않아 변경 영향 범위 파악이 어려웠습니다.
  2. 설계 결정   
     Service 메서드는 모든 로직을 직접 처리하지 않고,
     기능 단위로 분리된 메서드를 조합하는 역할만 수행하도록 설계합니다.
  3. 설계 구현   
     request DTO -> Service DTO로 변환, 유효성 검증, 도메인 객체 생성, 저장 로직 등 수행 책임을 각각 분리하고,
     Service 메서드는 비즈니스 흐름일 읽기 쉽게 조합하는 역할만 수행합니다.
  4. 설계 의의   
     서비스 로직의 의도가 코드 구조로 드러나, 변경 시 영향을 받는 기능 단위를 빠르게 파악 가능하게 합니다.

- [ ] 테스트를 통한 변경 안정성 확보
  1. 설계 배경   
     실무에서는 웹 화면 기반 테스트에 의존했고, 테스트는 개발 완료 후 형식적으로 생성되는 산출물에 가까웠습니다.
     이번 프로젝트에서는 테스트를 로직 검증과 변경 안정성을 위한 도구로 사용해보고자 합니다.
  2. 설계 결정   
     웹 요청 없이 로직 검증할 수 있도록 Service 단위 테스트를 도입합니다.
     HTTP 요청/응답은 Controller 테스트로 분리합니다.
  3. 설계 구현
    - Mockito 기반 Service 단위 테스트
    - MockMvc 기반 Controller 테스트
    - 외부 의존성(DB, Repository)은 Mock 처리
  4. 설계 의의   
     버튼 클릭 없이 IDE에서 즉시 로직 검증이 가능합니다.
     또한 수정 -> 테스트 실행 -> 결과 확인의 피드백 루프를 단축시킬 수 잆습니다.


### 3-2. 고도화
본 프로젝트는 최초 설계에서 끝나지 않고, 학습과 경험을 바탕으로 점진적으로 고도화합니다.   
기능 구현 → 문제 인식 → 학습 → 구조 개선의 반복 과정을 통해 설계 판단의 근거와 변화 과정을 코드로 남기는 것을 목표로 합니다.

- [ ] 입력 검증과 정책 검증의 명확한 분리
  1. 설계 배경
     입력값 오류와 비즈니스 규칙 위반이 혼재되어 처리되고 있었습니다.
  2. 설계 결정
     검증 성격에 따라 책임을 명확히 분리합니다.
  3. 설계 구현
    - 입력값 검증: Request DTO + Bean Validation
    - 비즈니스 정책 검증: Service 흐름 중 ProductPolicy 호출
  4. 설계 의의
     오류 원인의 의미가 명확해지고 에러 코드, 예외처리, 테스트 시나리오 분리를 가능하게 합니다.

- [ ] 비즈니스 정책 분리
  1. 설계 배경    
     기존 Service 메서드가 판단, 규칙, 흐름을 모두 담당해 책임이 과도하게 집중되어 있었습니다.
  2. 설계 결정    
     Service는 유스케이스 흐름 조합만 담당합니다. 따라서 비즈니스 정책은 이름 있는 개념으로 분리합니다.
  3. 설계 구현    
     ProductService 내의 비즈니스 정책을 ProductPolicy로 분리해 Service는 정책 판단을 직접 하지 않고 검증을 위임합니다.
  4. 설계 의의    
     정책 변경 시 영향 범위가 명확해이고 Service 메서드의 가독성 및 유지보수성이 향상됩니다.

- [ ] 테스트 시나리오 확장 및 테스트 문서화
  1. 설계 배경
     초기 테스트는 정상 동작 확인 수준에 머물러 변경 안정성 보장이 어려웠습니다.
  2. 설계 결정
     성공/실패 시나리오를 모두 포함하는 테스트로 확장 가능합니다.
     테스트를 실행 가능한 요구사항 문서로 활용 가능합니다.
  3. 설계 구현
    - Controller 테스트를 @WebMvcTest 기반으로 전환
    - Controller 테스트에 Validation, Security, ExceptionHandler 반영
    - @DisplayName을 요구사항 문장으로 작성
    - 픽스쳐 메서드로 테스트 의도 명확화
  4. 설계 의의
     테스트 파일 하나로 기능 명세 파악이 가능하게 합니다.
     테스트가 존재하는 코드에서 변경 안전망으로 발전하게 합니다.

- [ ] 예외 처리 구조 개선
- [ ] 메시지 관리 방식 개선
- [ ] 서버 에러에 대한 적절한 HTTP 상태 변경


## 4. 주요 기능 (필수 구현)
### 4-1. 인증/인가
- [X] 회원가입 (SELLER / CUSTOMER 권한 분리)
- [X] JWT 기반 로그인 / 로그아웃
- [X] Spring Security Filter 기반 접근 제어
- [X] 비밀번호 암호화 처리

### 4-2. 상품 관리 (판매자 권한)
- [X] 상품 등록 (옵션 포함)
- [X] 상품 수정 (설명, 판매 상태)
- [X] 판매 상태 관리 (ON_SALE / DISCONTINUED / DELETION)
- [ ] 본인 상품만 수정 가능

### 4-3. 상품 조회 (고객 권한)
- [ ] 권한 관계없이 상품 검색
- [ ] 권한 관계없이 상품 상세 조회
- [ ] 판매중 상품만 노출
- [ ] 키워드 검색 및 페이징 처리

### 4-4. 장바구니
- [ ] 로그인 사용자만 장바구니 사용 가능
- [ ] 장바구니 상품 추가 / 삭제 / 조회
- [ ] 장바구니 선택 항목 주문

### 4-5. 주문
- [ ] 장바구니 선택 항목 기반 주문 생성
- [ ] 주문 생성 시 재고 검증 및 감소
- [ ] 주문 상태 관리 (CREATED / PAID / CANCELED)
- [ ] 트랜잭션 기반 주문 처리

### 4-6. 결제
- [ ] Mock 결제 서비스 구현
- [ ] 결제 성공 / 실패 처리
- [ ] 결제 결과에 따른 주문 상태 변경


## 5. 테스트 전략
도메인 규칙, 실패 시나리오 테스트 등 Service 계층 중심의 단위 테스트를 작성해 비즈니스 규칙 검증에 집중합니다.
- 주요 테스트 시나리오
  - [ ] 장바구니 소유자 검증 (다른 사람 장바구니 주문 불가)
  - [ ] 재고 부족 시 주문 실패
  - [ ] 결제 실패 시 주문 취소 처리


## 6. 프로젝트를 통해 얻은 점 

## 7. 산출물
- [ ] DB ERD (Product로 도메인 수정 및 알림 테이블 제거 등 변경사항에 따라 변경 필요)
- [ ] API 명세서 (현재 미포함)
- [ ] 테스트 코드 (작성된 테스트코드 확인 후 추가 필요 테스트 작성)


## 8. 참고자료
## < 주문 프로세스 FLOW CHART >
![ORDER_PROCESS_FLOW_CHART](./output/order-process-flow-chart.png)

## < DB ERD >
ERD 편집 : https://www.erdcloud.com/d/LuE5DFSZNinSPhYMe   
![ERD](./output/my-e-commerce-erd.png)

## < 일정표 >
JIRA 일정관리 : https://glyceria.atlassian.net/jira/software/projects/MYCMP/boards/1/timeline?epic=COMPLETE3M

![PLANNER](./output/my-e-commerce-project-planner.png)


